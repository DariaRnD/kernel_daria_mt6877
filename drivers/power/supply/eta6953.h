/*
 * SGM ETA6953 charger driver by SUYI
 *
 * Copyright (C) 2021 SGMicro Corporation
 *
 * This driver is for Linux kernel 4.4
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See http://www.gnu.org/licenses/gpl-2.0.html for more details.
 */

#ifndef __ETA6953_CHARGER_H
#define __ETA6953_CHARGER_H

#define ETA6953_SLAVE_ADDR	0xD6
#define SGM41512_DEVID		0x05
/*prize add by zhaopengge 20210623 start*/
#define ETA6963_DEVID		0x07
#define ETA6953_DEVID		0x02
/*prize add by zhaopengge 20210623 end*/
enum eta6953_reg_addr {
	ETA6953_REG_00 = 0x00,
	ETA6953_REG_01,
	ETA6953_REG_02,
	ETA6953_REG_03,
	ETA6953_REG_04,
	ETA6953_REG_05,
	ETA6953_REG_06,
	ETA6953_REG_07,
	ETA6953_REG_08,
	ETA6953_REG_09,
	ETA6953_REG_0A,
	ETA6953_REG_0B,
};

#define ETA6953_CHR_DET_OK 				0
#define ETA6953_CHR_DET_VBUS_NOT_READY 	1
#define ETA6953_CHR_DET_IIC_ERROR 			2


#define ETA6953_REG_STATUS	ETA6953_REG_08

/* ========== OTGCFG 0x00 ============ */
#define ETA6953_REG_OTGCC ETA6953_REG_02
#define ETA6953_OTGCC_MASK	BIT(7)

/* ========== TOP 0x01 ============ */
#define ETA6953_REG_WDTCNTRST ETA6953_REG_01
#define ETA6953_WDTCNTRST_MASK	BIT(6)
#define ETA6953_REG_WDT ETA6953_REG_05
#define ETA6953_WDT_SHIFT	4
#define ETA6953_WDT_MASK		0x30

/* ========== FUNCTION 0x02 ============ */
#define ETA6953_REG_BATFETDIS ETA6953_REG_07
#define ETA6953_BATFETDIS_SHIFT	5
#define ETA6953_BATFETDIS_MASK	BIT(5)
#define ETA6953_REG_HZ	ETA6953_REG_00
#define ETA6953_FORCE_HZ_SHIFT	7
#define ETA6953_FORCE_HZ_MASK	BIT(7)
#define ETA6953_REG_OTG_EN ETA6953_REG_01
#define ETA6953_OTG_EN_SHIFT	5
#define ETA6953_OTG_EN_MASK	BIT(5)
#define ETA6953_REG_CHG_EN ETA6953_REG_01
#define ETA6953_CHG_EN_SHIFT	4
#define ETA6953_CHG_EN_MASK	BIT(4)

#define ETA6953_REG_IINDET_EN ETA6953_REG_07
#define ETA6953_REG_IINDET_EN_MASK	BIT(7)

/* ========== IBUS 0x03 ============ */
#define ETA6953_REG_AICC_EN ETA6953_REG_07
#define ETA6953_AICC_EN_SHIFT	7
#define ETA6953_AICC_EN_MASK	BIT(7)
#define ETA6953_REG_AICR ETA6953_REG_00
#define ETA6953_AICR_SHIFT	0
#define ETA6953_AICR_MASK	0x1F
#define ETA6953_AICR_MIN		100000
#define ETA6953_AICR_MAX		3200000
#define ETA6953_AICR_STEP	100000

/* ========== VBUS 0x04 ============ */
#define ETA6953_REG_VAC_OVP ETA6953_REG_06
#define ETA6953_VAC_OVP_SHIFT	6
#define ETA6953_VAC_OVP_MASK	0xC0
#define ETA6953_REG_MIVRTRACK ETA6953_REG_07
#define ETA6953_MIVRTRACK_SHIFT	0
#define ETA6953_MIVRTRACK_MASK	0x03
#define ETA6953_REG_MIVR ETA6953_REG_06
#define ETA6953_MIVR_SHIFT	0
#define ETA6953_MIVR_MASK	0x0F
#define ETA6953_MIVR_MIN		3900000
#define ETA6953_MIVR_MAX		5400000
#define ETA6953_MIVR_STEP	100000

/* ========== VCHG 0x07 ============ */
#define ETA6953_REG_CV ETA6953_REG_04
#define ETA6953_CV_SHIFT		3
#define ETA6953_CV_MASK		0xF8
#define ETA6953_CV_MIN		3848000
#define ETA6953_CV_MAX		4616000
#define ETA6953_CV_STEP		32000

/* ========== ICHG 0x08 ============ */
#define ETA6953_REG_ICHG ETA6953_REG_02
#define ETA6953_ICHG_SHIFT	0
#define ETA6953_ICHG_MASK	0x3F
#define ETA6953_ICHG_MIN		0
#define ETA6953_ICHG_MAX		3000000
#define ETA6953_ICHG_STEP	60000

/* ========== CHGTIMER 0x09 ============ */
#define ETA6953_REG_SAFETMR_EN ETA6953_REG_05
#define ETA6953_SAFETMR_EN_SHIFT	3
#define ETA6953_SAFETMR_EN_MASK	BIT(3)
#define ETA6953_REG_SAFETMR ETA6953_REG_05
#define ETA6953_SAFETMR_SHIFT	2
#define ETA6953_SAFETMR_MASK	0x04
#define ETA6953_SAFETMR_MIN	5
#define ETA6953_SAFETMR_MAX	10
#define ETA6953_SAFETMR_STEP	5

/* ========== EOC 0x0A ============ */
#define ETA6953_REG_IEOC ETA6953_REG_03
#define ETA6953_IEOC_SHIFT	0
#define ETA6953_IEOC_MASK	0x0F
#define ETA6953_IEOC_MIN		60000
#define ETA6953_IEOC_MAX		960000
#define ETA6953_IEOC_STEP	60000
#define ETA6953_REG_TE ETA6953_REG_05
#define ETA6953_TE_MASK		BIT(7)

/* ========== INFO 0x0B ============ */
#define ETA6953_REG_REGRST ETA6953_REG_0B
#define ETA6953_REGRST_MASK	BIT(7)
#define ETA6953_REG_DEVID ETA6953_REG_0B
#define ETA6953_DEVID_SHIFT	3
#define ETA6953_DEVID_MASK	0x78
#define ETA6953_REG_DEVREV ETA6953_REG_0B
#define ETA6953_DEVREV_SHIFT	0
#define ETA6953_DEVREV_MASK	0x03

/* ========== JEITA 0x0C ============ */
#define ETA6953_REG_JEITA_COOL_ISET ETA6953_REG_05
#define ETA6953_JEITA_COOL_ISET_MASK	BIT(0)
#define ETA6953_REG_JEITA_COOL_VSET ETA6953_REG_07
#define ETA6953_JEITA_COOL_VSET_MASK	BIT(4)

/* ========== STATUS 0x0F ============ */
#define ETA6953_REG_ICSTAT ETA6953_REG_08
#define ETA6953_ICSTAT_SHIFT	3
#define ETA6953_ICSTAT_MASK	0x18
#define ETA6953_VBUSSTAT_SHIFT	5
#define ETA6953_VBUSSTAT_MASK	0xE0
#define ETA6953_CHRGSTAT_SHIFT	3
#define ETA6953_CHRGSTAT_MASK	0x18
#define ETA6953_PGSTAT_SHIFT	2
#define ETA6953_PGSTAT_MASK	BIT(2)
#define ETA6953_THERMSTAT_SHIFT	1
#define ETA6953_THERMSTAT_MASK	BIT(1)
#define ETA6953_VSYSSTAT_SHIFT	0
#define ETA6953_VSYSSTAT_MASK	BIT(0)
#define ETA6953_REG_PORTSTAT ETA6953_REG_08
#define ETA6953_PORTSTAT_SHIFT	5
#define ETA6953_PORTSTAT_MASK	0xE0
#define ETA6953_REG_FAULT ETA6953_REG_09
#define ETA6953_WDFAULT_SHIFT	7
#define ETA6953_WDFAULT_MASK	BIT(7)
#define ETA6953_BOOSTFAULT_SHIFT	6
#define ETA6953_BOOSTFAULT_MASK	BIT(6)
#define ETA6953_CHRGFAULT_SHIFT	4
#define ETA6953_CHRGFAULT_MASK	0x30
#define ETA6953_BATFAULT_SHIFT	3
#define ETA6953_BATFAULT_MASK	BIT(3)
#define ETA6953_NTCFAULT_SHIFT	0
#define ETA6953_NTCFAULT_MASK	0x07

/* ========== STAT0 0x10 ============ */
#define ETA6953_REG_VBUSGD ETA6953_REG_0A
#define ETA6953_ST_VBUSGD_SHIFT		7
#define ETA6953_ST_VBUSGD_MASK		BIT(7)
#define ETA6953_REG_CHGRDY ETA6953_REG_08
#define ETA6953_ST_CHGRDY_SHIFT		2
#define ETA6953_ST_CHGRDY_MASK		BIT(2)
#define ETA6953_REG_CHGDONE ETA6953_REG_ICSTAT
#define ETA6953_ST_CHGDONE_SHIFT		ETA6953_ICSTAT_SHIFT
#define ETA6953_ST_CHGDONE_MASK		ETA6953_ICSTAT_MASK

/* ========== STAT1 0x11 ============ */
#define ETA6953_REG_ST_MIVR	ETA6953_REG_0A
#define ETA6953_ST_MIVR_SHIFT	6
#define ETA6953_ST_MIVR_MASK	BIT(6)
#define ETA6953_REG_ST_AICR	ETA6953_REG_0A
#define ETA6953_ST_AICR_MASK	BIT(5)
#define ETA6953_REG_ST_BATOVP	ETA6953_REG_09
#define ETA6953_ST_BATOVP_SHIFT	3
#define ETA6953_ST_BATOVP_MASK	BIT(3)

/* ========== STAT2 0x12 ============ */
#define ETA6953_REG_SYSMIN	ETA6953_REG_08
#define ETA6953_ST_SYSMIN_SHIFT	0

/* ========== STAT3 0x13 ============ */
#define ETA6953_REG_VACOV	ETA6953_REG_0A
#define ETA6953_ST_VACOV_SHIFT	2
#define ETA6953_ST_VACOV_MASK	BIT(2)

/*

REG0A Register Details

D[1] VINDPM_INT_MASK
VINDPM Event Detection Interrupt Mask
0 = Allow VINDPM INT pulse
1 = Mask VINDPM INT pulse

0 R/W REG_RST
D[0] IINDPM_INT_MASK
IINDPM Event Detection Mask
0 = Allow IINDPM to send INT pulse
1 = Mask IINDPM INT pulse
*/

#define ETA6953_REG_VINDPM	ETA6953_REG_0A
#define ETA6953_VINDPM_SHIFT	1
#define ETA6953_VINDPM_MASK	BIT(1)

#define ETA6953_REG_IINDPM	ETA6953_REG_0A
#define ETA6953_IINDPM_SHIFT	0
#define ETA6953_IINDPM_MASK	BIT(0)

#define ETA6953_VINDPM_IINDPM_MASK	 (BIT(1) | BIT(0))

#endif /* __ETA6953_CHARGER_H */
